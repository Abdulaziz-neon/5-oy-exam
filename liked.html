<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Asaxiy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2Pkf6z7f3GJ4Z1rj7CM1c8Z2rZ1qfV8gJZ9i3t+Kk9JrN6xM1V7QZ4h8eg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body class="p-2">
    <nav class="flex justify-between items-center p-4 bg-white md:hidden">
      <div class="text-lg font-bold">
        <a class="cursor-pointer" href="./index.html"><img src="./img/Logo.png" alt="" /></a>
      </div>
      <button id="menu-btn" class="text-2xl focus:outline-none">☰</button>
    </nav>
    <div id="menu" class="hidden flex-col gap-4 p-4 bg-white md:hidden">
      <div class="flex items-center space-x-3">
        <img src="./img/oplatit.png" />
        <p class="font-bold opacity-[60%]">Оплатить</p>
      </div>
      <div class="flex items-center space-x-3">
        <img src="./img/otsledit.png" />
        <p class="font-bold opacity-[60%]">Отследить заказ</p>
      </div>
      <div class="flex items-center space-x-3">
        <div class="w-[10%]">
          <img
            src="https://asaxiy.uz/custom-assets/images/icons/header/icons8-new-product.svg"
          />
        </div>
        <p class="font-bold opacity-[60%]">Новинки</p>
      </div>
      <div class="flex items-center space-x-3">
        <img src="https://asaxiy.uz/custom-assets/images/icons/news.svg" />
        <p class="font-bold opacity-[60%]">Новости</p>
      </div>
      <div class="flex items-center space-x-3">
        <img
          src="https://asaxiy.uz/custom-assets/images/icons/info-black.svg"
        />
        <p class="font-bold opacity-[60%]">О нас</p>
      </div>
      <h3 class="font-bold text-xl">Доставка и магазины</h3>
    </div>

    <nav class="hidden md:flex justify-between p-4 items-center">
      <div class="flex items-center space-x-3">
        <img src="./img/logo.png" alt="" />
        <div
          class="bg-[#006BFF] rounded-xl py-2 text-white px-3 font-bold text-[16px]"
        >
          ☰Категории
        </div>
        <form action="./index.html" class="flex w-full max-w-md items-center">
          <input
            name="q"
            type="text"
            placeholder="Поиск..."
            class="flex-grow max-w-[400px] rounded border border-[#006BFF] px-4 py-2 text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          <button
            class="rounded bg-[#006BFF] px-4 py-2 text-white text-[16px] hover:bg-blue-700 transition-colors"
            type="submit"
          >
            Искать
          </button>
        </form>
      </div>
      <div class="flex space-x-12">
        <div class="flex flex-col items-center space-y-1">
          <div>
            <a href="./index.html"><img src="./img/srav.png" /></a>
          </div>
          <p class="text-[12px]">Сравнение</p>
        </div>
        <div class="flex flex-col items-center space-y-1">
          <div>
            <a href="./index.html"><img src="./assets/oplatit.png" /></a>
          </div>
          <p class="text-[12px]">Оплатить</p>
        </div>
        <div class="flex flex-col items-center space-y-1">
          <div>
            <a href="./index.html"><img src="./img/otsledit.png" /></a>
          </div>
          <p class="text-[12px]">Отследить</p>
        </div>
        <div class="flex flex-col items-center space-y-1">
          <div>
            <a href="./savat.html"><img src="./img/korzina.png" /></a>
          </div>
          <p class="text-[12px]">Корзина</p>
        </div>
        <div class="flex flex-col items-center space-y-1">
          <div>
            <a href="./liked.html"><img src="./img/izbran.png" /></a>
          </div>
          <p class="text-[12px]">Избранное</p>
        </div>
        <div class="flex flex-col items-center space-y-1">
          <div>
            <img src="./img/uzb.png" />
          </div>
          <p class="text-[12px]">O'zbekcha</p>
        </div>
        <div class="flex flex-col items-center space-y-1">
          <div>
            <img src="./img/voyti.png" />
          </div>
          <p class="text-[12px]">Войти</p>
        </div>
      </div>
    </nav>
    <hr />

    <nav class="hidden md:flex justify-between p-4 items-center">
      <a href="#">Супер цена</a>
      <a href="#">0-0-6</a>
      <a href="#">Смартфоны</a>
      <a href="#">Бытовая техника</a>
      <a href="#">Книги</a>
      <a href="#">Телевизоры</a>
      <a href="#">Ноутбуки</a>
    </nav>

    <section class="p-2">
      <div class="flex space-x-2 mt-3">
        <h3 class="text-[#858997] text-[13px]">Главная</h3>
        <h3 class="text-[#858997] text-[13px]">></h3>
        <h3 class="text-[13px] text-[13px]">Избранное</h3>
      </div>
      <div id="likedEmpty" class="flex flex-col items-center my-14 md:my-[90px] justify-center">
        <div><img src="./img/likeblue.png" alt="" /></div>
        <h4 class="text-[#212529] text-[20px] font-bold mt-6">Нет любимых продуктов</h4>
        <h4 class="text-[#212529] text-[16px] mt-2">Добавить с символом ❤️ на продукте</h4>
      </div>
      <div id="likedGrid" class="hidden grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 mt-6"></div>
    </section>

    <section class="bg-[#006BFF] p-2">
      <div class="md:flex md:justify-between bg-white rounded-xl py-2 px-4">
        <div class="flex space-x-7 items-center my-4">
          <div><img src="./img/karopka.png" /></div>
          <div>
            <h4 class="text-[#282830] text-[16px]">
              Больше не нужно ходить на базар
            </h4>
            <p class="text-[#858997] text-[14px] max-w-[160px]">
              У нас выгодные цены и доставка до дома
            </p>
          </div>
        </div>
        <div class="flex space-x-7 items-center">
          <div><img src="./img/mashina.png" /></div>
          <div>
            <h4 class="text-[#282830] text-[16px]">Быстрая доставка</h4>
            <p class="text-[#858997] text-[14px] max-w-[160px]">
              Наш сервис удивит вас
            </p>
          </div>
        </div>
        <div class="flex space-x-7 items-center my-4">
          <div><img src="./img/qaytarish.png" /></div>
          <div>
            <h4 class="text-[#282830] text-[16px]">Удобства для вас</h4>
            <p class="text-[#858997] text-[14px] max-w-[160px]">
              Быстрое оформление и гарантия на возврат в случае неисправности
            </p>
          </div>
        </div>
        <div class="flex space-x-7 items-center mb-4">
          <div><img src="./img/karta.png" /></div>
          <div>
            <h4 class="text-[#282830] text-[16px]">Рассрочка</h4>
            <p class="text-[#858997] text-[14px] max-w-[160px]">
              Без предоплаты на 3, 6 или 12 месяцев
            </p>
          </div>
        </div>
      </div>
    </section>

    <script>
      const LS_KEY = 'likedProducts';
      const likedGrid = document.getElementById('likedGrid');
      const likedEmpty = document.getElementById('likedEmpty');

      function getLikes(){
        try { return JSON.parse(localStorage.getItem(LS_KEY) || '[]'); } catch { return []; }
      }
      function setLikes(list){ localStorage.setItem(LS_KEY, JSON.stringify(list)); }

      function render(){
        const items = getLikes();
        likedGrid.innerHTML = '';
        if(!items.length){
          likedEmpty.classList.remove('hidden');
          likedGrid.classList.add('hidden');
          return;
        }
        likedEmpty.classList.add('hidden');
        likedGrid.classList.remove('hidden');
        items.forEach(p => {
          const card = document.createElement('div');
          card.className = 'bg-white border rounded-lg p-4 hover:shadow-md transition flex flex-col';
          card.innerHTML = `
            <div class="relative w-full aspect-square bg-gray-50 rounded-md overflow-hidden">
              <img src="${p.image}" alt="${p.name}" class="w-full h-full object-contain"/>
              <button aria-label="unlike" data-id="${p.id}" class="unlike absolute top-2 right-2 w-6 h-6 flex items-center justify-center">
                <img class="w-5 h-5" src="./img/lv.svg" alt="like" style="filter: brightness(0) saturate(100%) invert(27%) sepia(51%) saturate(2878%) hue-rotate(346deg) brightness(104%) contrast(97%);" />
              </button>
              ${p.discountPercentage ? '<span class="absolute left-2 top-2 bg-orange-400 text-white text-[10px] px-2 py-1 rounded">СКИДКА</span>' : ''}
            </div>
            <h3 class="mt-3 text-sm font-medium line-clamp-2">${p.name}</h3>
            <p class="text-xs text-gray-500 mt-1 line-clamp-2">${p.description || ''}</p>
            ${p.discountPercentage ? `<div class=\"text-xs text-gray-400 mt-1 line-through\">${new Intl.NumberFormat('ru-RU',{style:'currency',currency:'USD',maximumFractionDigits:0}).format(p.price)}</div>` : ''}
          `;
          likedGrid.appendChild(card);
        });

        likedGrid.querySelectorAll('.unlike').forEach(btn => {
          btn.addEventListener('click', () => {
            const id = Number(btn.getAttribute('data-id'));
            const arr = getLikes().filter(x => x.id !== id);
            setLikes(arr);
            render();
          });
        });
      }

      render();
      const btn = document.getElementById("menu-btn");
      const menu = document.getElementById("menu");
      btn.addEventListener("click", () => {
        menu.classList.toggle("hidden");
        menu.classList.toggle("flex");
      });
    </script>
  </body>
</html>
